### 1.差分数组

```C++
建立差分数组f：
    f[1] = d[1] -0 = d[1]; // i=1;
	f[i]=d[i]-d[i-1]; // i<-[2,n]
=>
    f[1] = d[1] - 0;
    f[2] = d[2] - d[1];
	f[3] = d[3] - d[2];
	f[4] = d[4] - d[3];
	.....
     f[n] = d[n] - d[n-1];
```

### 2.性质

 (1)计算数列各项的值：观察d[2]=f[1]+f[2]=d[1]+d[2]-d[1]=d[2]可知，数列第i项的值是可以用差分数组的前i项的和计算的，即d[i]=f[i]的前缀和。 

 (2)计算数列每一项的前缀和：第i项的前缀和即为数列前i项的和，那么推导可知
![img](差分数组的应用.assets/1296534-20180209192534420-1693228814.png)
即可用差分数组求出数列前缀和； 

### 3.用途：

#### (1)快速处理区间加减操作：

假如现在对数列中区间[L,R]上的数加上x，我们通过性质(1)知道，第一个受影响的差分数组中的元素为f[L],即令f[L]+=x，那么后面数列元素在计算过程中都会加上x；最后一个受影响的差分数组中的元素为f[R],所以令f[R+1]-=x，即可保证不会影响到R以后数列元素的计算。这样我们不必对区间内每一个数进行处理，只需处理两个差分后的数即可

```
f[L]是第一个受到影响的差分数组。F[L]+x;之后，[L,R]都需要增加x;
f[R+1]-x;//[R+1,d[i]不能受到修改。
```

#### (2)询问区间和问题：

由性质(2)我们可以计算出数列各项的前缀和数组sum各项的值；那么显然，区间[L,R]的和即为ans=sum[R]-sum[L-1];

## 二、相关题目

### 1.[HDU1556]Color the ball 

### 2.[NKOJ3754]数列游戏

### 3.[NOIP2012提高&洛谷P1083]借教室

### 4.[洛谷P3948]数据结构